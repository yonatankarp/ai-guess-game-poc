plugins {
    id("pmd")
    id("com.diffplug.spotless")
    id("org.sonarqube")
}

repositories { mavenCentral() }

spotless {
    kotlin {
        target(
                fileTree(projectDir) {
                    include("**/*.kt")
                    exclude(
                            "**/.gradle/**",
                            "**/build/generated/**"
                    )
                }
        )
        // see https://github.com/shyiko/ktlint#standard-rules
        ktlint()
    }
}

pmd {
    toolVersion = "6.42.0"
    reportsDir = file("$project.buildDir/reports/pmd")
    ruleSets = []
    ruleSetFiles = files("config/pmd/ruleset.xml")
}

sonarqube {
    properties {
        property("sonar.projectKey", "yonatankarp_beat-the-machine")
        property("sonar.organization", "yonatankarp")
        property("sonar.host.url", "https://sonarcloud.io")
    }
}
